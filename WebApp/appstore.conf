
#############################################################
# Global configuration
#############################################################
[general]
bridge_parser = default
sqs_queue_name = webapp
s3_access_key = 
s3_private_key = 

#############################################################
# Storage configuration
#############################################################
[fs_storage]
base_path = repository
enable_lock = 0

## dejavu storage
[dejavu_storage]
Database = :memory:
db_type = sqlite

[sqlite_storage]
connection = store.db

[s3_storage]
access_key = 
private_key = 
bucket_unique_prefix = webapp_00000001

#############################################################
# Store configuration
#############################################################
[store]
enable_lock = 1
member_storage = s3_storage
media_storage = s3_storage
workspaces = ws0 

#############################################################
# Workspaces configuration
#############################################################
[ws0]
name = blog_ws
title = My Web
collections = col0,col1,col2,col3,col4,col5,col6

#############################################################
# Collections configuration
#############################################################

[col0]
name = frontpage
title = My Front Page
base_uri = http://localhost:9999/
base_edit_uri = http://localhost:9999/collection/frontpage/
base_media_edit_uri = http://localhost:9999/collection/music/media
accept_media_types = application/atom+xml
handlers = hd0
validate_collection_feed = module:core/atompub,callable:validate_collection_feed
reload_members = False

[col1]
name = blog
title = My Blog
base_uri = http://localhost:9999/
base_edit_uri = http://localhost:9999/collection/blog/
base_media_edit_uri = http://localhost:9999/collection/blog/media/
accept_media_types = application/atom+xml
handlers = hd0
validate_collection_feed = module:core/atompub,callable:validate_collection_feed
reload_members = False

[col2]
name = music
title = My Music
base_uri = http://localhost:9999/
base_edit_uri = http://localhost:9999/collection/music/
base_media_edit_uri = http://localhost:9999/collection/music/media
accept_media_types = application/atom+xml
handlers = hd0
validate_collection_feed = module:core/atompub,callable:validate_collection_feed
reload_members = 1

[col3]
name = calendar
title = My Calendar
base_uri = http://localhost:9999/
base_edit_uri = http://localhost:9999/collection/calendar/
base_media_edit_uri = http://localhost:9999/collection/calendar/media/
accept_media_types = application/atom+xml
handlers = hd0
validate_collection_feed = module:core/atompub,callable:validate_collection_feed
reload_members = 1

[col4]
name = photos
title = My Photos
base_uri = http://localhost:9999/
base_edit_uri = http://localhost:9999/collection/photos/
base_media_edit_uri = http://localhost:9999/collection/photos/media/
accept_media_types = application/atom+xml
handlers = hd0
validate_collection_feed = module:core/atompub,callable:validate_collection_feed
reload_members = False

[col5]
name = bookmarks
title = My Bookmarks
base_uri = http://localhost:9999/
base_edit_uri = http://localhost:9999/collection/bookmarks/
base_media_edit_uri = http://localhost:9999/collection/bookmarks/media/
accept_media_types = application/atom+xml
handlers = hd0
validate_collection_feed = module:core/atompub,callable:validate_collection_feed
reload_members = False

[col6]
name = subscriptions
title = My Subscriptions
base_uri = http://localhost:9999/
base_edit_uri = http://localhost:9999/collection/subscriptions/
base_media_edit_uri = http://localhost:9999/collection/subscriptions/media/
accept_media_types = application/atom+xml
handlers = hd0
validate_collection_feed = module:core/atompub,callable:validate_collection_feed
reload_members = False


#############################################################
# Handlers configuration
#############################################################
[hd0]
media_type = application/atom+xml
handler_class = AtomHandler
handler_module = core/handler/article
member_class = AtomMember
member_module = builtin:atom
member_type = mt0

#############################################################
# Member type configuration
#############################################################
[mt0]
name_creator = module:core/atompub,callable:resource_storage_name_generator
entry_id_creator = module:core/atompub,callable:atom_id_generator
preserve_id = True
preserve_dates = True